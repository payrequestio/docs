---
title: 'Authenticatie'
description: 'Leer hoe je met de PayRequest API authenticeert'
---

# Authenticatie

De PayRequest API gebruikt API-sleutels voor authenticatie. Alle API-verzoeken moeten een geldige API-sleutel in de request headers bevatten.

## API-sleutels

API-sleutels zijn unieke identifiers waarmee je applicatie zich bij de PayRequest API legitimeert. Je vindt je API-sleutels in het dashboard onder **Instellingen > API-sleutels**.

<Warning>
  **Houd je API-sleutels geheim!** Publiceer ze nooit in client-side code, openbare repositories of logbestanden. Behandel ze zoals wachtwoorden.
</Warning>

### Soorten sleutels

PayRequest biedt twee soorten API-sleutels:

<Tabs>
  <Tab title="Testsleutels">
    - Gebruik je voor ontwikkeling en testen
    - Beginnen met `test_`
    - Verwerken geen echt geld
    - Veilig te gebruiken in ontwikkelomgevingen

    ```
    test_1234567890abcdef
    ```
  </Tab>

  <Tab title="Livesleutels">
    - Gebruik je voor productieomgevingen
    - Beginnen met `live_`
    - Verwerken echte betalingen
    - Gebruik je uitsluitend op beveiligde servers

    ```
    live_1234567890abcdef
    ```
  </Tab>
</Tabs>

## Geauthenticeerde requests maken

Voeg je API-sleutel toe aan de `Authorization`-header met het Bearer-tokenformaat:

<CodeGroup>
```bash cURL
curl -X GET https://api.payrequest.io/v1/payments \
  -H "Authorization: Bearer your_api_key_here" \
  -H "Content-Type: application/json"
```

```javascript JavaScript
const response = await fetch('https://api.payrequest.io/v1/payments', {
  headers: {
    'Authorization': 'Bearer your_api_key_here',
    'Content-Type': 'application/json'
  }
});
```

```python Python
import requests

headers = {
    'Authorization': 'Bearer your_api_key_here',
    'Content-Type': 'application/json'
}

response = requests.get(
    'https://api.payrequest.io/v1/payments',
    headers=headers
)
```

```php PHP
<?php
$headers = [
    'Authorization: Bearer your_api_key_here',
    'Content-Type: application/json'
];

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://api.payrequest.io/v1/payments');
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
curl_close($ch);
?>
```
</CodeGroup>

## Authenticatiefouten

Als de authenticatie faalt, ontvang je een `401 Unauthorized`-response:

```json
{
  "error": {
    "code": "unauthorized",
    "message": "Invalid API key provided"
  }
}
```

Veelvoorkomende authenticatiefouten:

<AccordionGroup>
  <Accordion title="Ongeldige API-sleutel" icon="key">
    **Fout**: `unauthorized`

    **Oorzaak**: De API-sleutel is ongeldig, verlopen of verkeerd gespeld.

    **Oplossing**: Controleer je API-sleutel in het dashboard en zorg dat deze correct is geformatteerd.
  </Accordion>

  <Accordion title="Ontbrekende Authorization-header" icon="header">
    **Fout**: `missing_authorization`

    **Oorzaak**: De `Authorization`-header ontbreekt in het verzoek.

    **Oplossing**: Voeg de header `Authorization: Bearer your_api_key` toe.
  </Accordion>

  <Accordion title="Verkeerde omgeving" icon="server">
    **Fout**: `invalid_environment`

    **Oorzaak**: Een testsleutel gebruiken tegen de live API of andersom.

    **Oplossing**: Gebruik het juiste API-endpoint voor het type sleutel.
  </Accordion>

  <Accordion title="Ingetrokken sleutel" icon="ban">
    **Fout**: `key_revoked`

    **Oorzaak**: De API-sleutel is ingetrokken of verwijderd.

    **Oplossing**: Genereer een nieuwe API-sleutel in je dashboard.
  </Accordion>
</AccordionGroup>

## Best practices

### Omgevingsvariabelen

Sla API-sleutels op in omgevingsvariabelen in plaats van ze hard te coderen:

<CodeGroup>
```bash Omgeving
# .env-bestand
PAYREQUEST_API_KEY=your_api_key_here
```

```javascript Node.js
// Laden vanuit de omgeving
const apiKey = process.env.PAYREQUEST_API_KEY;
```

```python Python
import os

# Laden vanuit de omgeving
api_key = os.getenv('PAYREQUEST_API_KEY')
```

```php PHP
<?php
// Laden vanuit de omgeving
$apiKey = getenv('PAYREQUEST_API_KEY');
?>
```
</CodeGroup>

### Sleutelrotatie

Roteer je API-sleutels regelmatig voor extra veiligheid:

<Steps>
  <Step title="Genereer een nieuwe sleutel">
    Maak een nieuwe API-sleutel in je dashboard
  </Step>
  <Step title="Werk applicaties bij">
    Zorg dat al je applicaties de nieuwe sleutel gebruiken
  </Step>
  <Step title="Test grondig">
    Controleer of alle integraties met de nieuwe sleutel werken
  </Step>
  <Step title="Trek de oude sleutel in">
    Verwijder de oude sleutel zodra de migratie klaar is
  </Step>
</Steps>

### Monitoring

Monitor het gebruik van je API-sleutels in het dashboard:

- **Requestvolume**: Bekijk hoe vaak de API wordt aangeroepen
- **Foutpercentages**: Houd authenticatiefouten in de gaten
- **Laatst gebruikt**: Zie wanneer sleutels voor het laatst actief waren
- **IP-beperkingen**: Beperk sleutels tot specifieke IP-adressen

## Webhook-authenticatie

Webhooks gebruiken een andere authenticatiemethode. PayRequest ondertekent webhook-payloads met een geheime sleutel die je kunt verifiÃ«ren:

<CodeGroup>
```javascript Node.js
const crypto = require('crypto');

function verifyWebhook(payload, signature, secret) {
  const expectedSignature = crypto
    .createHmac('sha256', secret)
    .update(payload)
    .digest('hex');

  return signature === `sha256=${expectedSignature}`;
}

// In je webhook-handler
const signature = req.headers['payrequest-signature'];
const isValid = verifyWebhook(req.body, signature, webhookSecret);
```

```python Python
import hmac
import hashlib

def verify_webhook(payload, signature, secret):
    expected_signature = hmac.new(
        secret.encode(),
        payload.encode(),
        hashlib.sha256
    ).hexdigest()

    return signature == f"sha256={expected_signature}"

# In je webhook-handler
signature = request.headers.get('payrequest-signature')
is_valid = verify_webhook(request.body, signature, webhook_secret)
```
</CodeGroup>

## Rate limiting

API-sleutels hebben snelheidslimieten. Als je de limiet overschrijdt, ontvang je een `429 Too Many Requests`-response:

```json
{
  "error": {
    "code": "rate_limit_exceeded",
    "message": "Too many requests. Try again later."
  }
}
```

Informatie over limieten staat in de response-headers:

```http
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 87
X-RateLimit-Reset: 1640995200
```

## Authenticatie testen

Gebruik deze endpoint om je API-sleutel te testen:

<CodeGroup>
```bash Test API-sleutel
curl -X GET https://api.payrequest.io/v1/account \
  -H "Authorization: Bearer your_api_key_here"
```

```json Succesvolle response
{
  "id": "acc_1234567890",
  "email": "user@example.com",
  "name": "Your Company",
  "environment": "test"
}
```
</CodeGroup>

## Volgende stappen

<CardGroup cols={2}>
  <Card
    title="Maak je eerste betaling"
    icon="credit-card"
    href="/nl/essentials/payments"
  >
    Start met geauthenticeerde API-calls
  </Card>
  <Card
    title="Webhooks instellen"
    icon="webhook"
    href="/nl/essentials/webhooks"
  >
    Configureer webhookauthenticatie
  </Card>
  <Card
    title="Veiligheidsrichtlijnen"
    icon="shield"
    href="/nl/essentials/security"
  >
    Houd je integratie veilig
  </Card>
  <Card
    title="Betalingen monitoren"
    icon="gauge"
    href="/nl/essentials/payment-tracking"
  >
    Analyseer API-activiteit en prestaties
  </Card>
</CardGroup>
