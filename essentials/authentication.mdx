---
title: 'Authentication'
description: 'Learn how to authenticate with the PayRequest API'
---

# Authentication

The PayRequest API uses API keys for authentication. All API requests must include a valid API key in the request headers.

## API Keys

API keys are unique identifiers that authenticate your application with the PayRequest API. You can find your API keys in your dashboard under **Settings > API Keys**.

<Warning>
  **Keep your API keys secure!** Never expose them in client-side code, public repositories, or logs. Treat them like passwords.
</Warning>

### Key Types

PayRequest provides two types of API keys:

<Tabs>
  <Tab title="Test Keys">
    - Used for development and testing
    - Start with `test_`
    - No real money is processed
    - Safe to use in development environments

    ```
    test_1234567890abcdef
    ```
  </Tab>

  <Tab title="Live Keys">
    - Used for production environments
    - Start with `live_`
    - Process real payments
    - Should only be used on secure servers

    ```
    live_1234567890abcdef
    ```
  </Tab>
</Tabs>

## Making Authenticated Requests

Include your API key in the `Authorization` header using the Bearer token format:

<CodeGroup>
```bash cURL
curl -X GET https://api.payrequest.io/v1/payments \
  -H "Authorization: Bearer your_api_key_here" \
  -H "Content-Type: application/json"
```

```javascript JavaScript
const response = await fetch('https://api.payrequest.io/v1/payments', {
  headers: {
    'Authorization': 'Bearer your_api_key_here',
    'Content-Type': 'application/json'
  }
});
```

```python Python
import requests

headers = {
    'Authorization': 'Bearer your_api_key_here',
    'Content-Type': 'application/json'
}

response = requests.get(
    'https://api.payrequest.io/v1/payments',
    headers=headers
)
```

```php PHP
<?php
$headers = [
    'Authorization: Bearer your_api_key_here',
    'Content-Type: application/json'
];

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://api.payrequest.io/v1/payments');
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
curl_close($ch);
?>
```
</CodeGroup>

## Authentication Errors

If authentication fails, you'll receive a `401 Unauthorized` response:

```json
{
  "error": {
    "code": "unauthorized",
    "message": "Invalid API key provided"
  }
}
```

Common authentication errors:

<AccordionGroup>
  <Accordion title="Invalid API Key" icon="key">
    **Error**: `unauthorized`
    
    **Cause**: The API key is invalid, expired, or malformed.
    
    **Solution**: Verify your API key in the dashboard and ensure it's correctly formatted.
  </Accordion>

  <Accordion title="Missing Authorization Header" icon="header">
    **Error**: `missing_authorization`
    
    **Cause**: The `Authorization` header is missing from the request.
    
    **Solution**: Include the `Authorization: Bearer your_api_key` header.
  </Accordion>

  <Accordion title="Wrong Environment" icon="server">
    **Error**: `invalid_environment`
    
    **Cause**: Using a test key against the live API or vice versa.
    
    **Solution**: Ensure you're using the correct API endpoint for your key type.
  </Accordion>

  <Accordion title="Revoked Key" icon="ban">
    **Error**: `key_revoked`
    
    **Cause**: The API key has been revoked or deleted.
    
    **Solution**: Generate a new API key in your dashboard.
  </Accordion>
</AccordionGroup>

## Best Practices

### Environment Variables

Store API keys in environment variables rather than hardcoding them:

<CodeGroup>
```bash Environment
# .env file
PAYREQUEST_API_KEY=your_api_key_here
```

```javascript Node.js
// Load from environment
const apiKey = process.env.PAYREQUEST_API_KEY;
```

```python Python
import os

# Load from environment
api_key = os.getenv('PAYREQUEST_API_KEY')
```

```php PHP
<?php
// Load from environment
$apiKey = getenv('PAYREQUEST_API_KEY');
?>
```
</CodeGroup>

### Key Rotation

Regularly rotate your API keys for security:

<Steps>
  <Step title="Generate New Key">
    Create a new API key in your dashboard
  </Step>
  <Step title="Update Applications">
    Update all applications to use the new key
  </Step>
  <Step title="Test Thoroughly">
    Verify all integrations work with the new key
  </Step>
  <Step title="Revoke Old Key">
    Delete the old key once migration is complete
  </Step>
</Steps>

### Monitoring

Monitor your API key usage in the dashboard:

- **Request Volume**: Track API call frequency
- **Error Rates**: Monitor authentication failures
- **Last Used**: See when keys were last active
- **IP Restrictions**: Limit key usage to specific IP addresses

## Webhook Authentication

Webhooks use a different authentication mechanism. PayRequest signs webhook payloads with a secret key that you can verify:

<CodeGroup>
```javascript Node.js
const crypto = require('crypto');

function verifyWebhook(payload, signature, secret) {
  const expectedSignature = crypto
    .createHmac('sha256', secret)
    .update(payload)
    .digest('hex');
  
  return signature === `sha256=${expectedSignature}`;
}

// In your webhook handler
const signature = req.headers['payrequest-signature'];
const isValid = verifyWebhook(req.body, signature, webhookSecret);
```

```python Python
import hmac
import hashlib

def verify_webhook(payload, signature, secret):
    expected_signature = hmac.new(
        secret.encode(),
        payload.encode(),
        hashlib.sha256
    ).hexdigest()
    
    return signature == f"sha256={expected_signature}"

# In your webhook handler
signature = request.headers.get('payrequest-signature')
is_valid = verify_webhook(request.body, signature, webhook_secret)
```
</CodeGroup>

## Rate Limiting

API keys are subject to rate limits. If you exceed the limit, you'll receive a `429 Too Many Requests` response:

```json
{
  "error": {
    "code": "rate_limit_exceeded",
    "message": "Too many requests. Try again later."
  }
}
```

Rate limit information is included in response headers:

```http
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 87
X-RateLimit-Reset: 1640995200
```

## Testing Authentication

Use this endpoint to test your API key:

<CodeGroup>
```bash Test API Key
curl -X GET https://api.payrequest.io/v1/account \
  -H "Authorization: Bearer your_api_key_here"
```

```json Success Response
{
  "id": "acc_1234567890",
  "email": "user@example.com",
  "name": "Your Company",
  "environment": "test"
}
```
</CodeGroup>

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Create Your First Payment"
    icon="credit-card"
    href="/api-reference/endpoint/create"
  >
    Start making authenticated API calls
  </Card>
  <Card
    title="Set Up Webhooks"
    icon="webhook"
    href="/essentials/webhooks"
  >
    Configure webhook authentication
  </Card>
  <Card
    title="Rate Limits"
    icon="gauge"
    href="/essentials/rate-limits"
  >
    Understand API rate limiting
  </Card>
  <Card
    title="Security Best Practices"
    icon="shield"
    href="/essentials/security"
  >
    Keep your integration secure
  </Card>
</CardGroup>